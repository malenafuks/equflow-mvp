<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EquiFlow — v1.4</title>
  <link rel="stylesheet" href="styles.css?v=1.4" />
</head>
<body>
<header class="topbar">
  <div class="brand">
    <span class="brand__dot"></span> EquiFlow
    <small class="badge badge-soft">MVP v1.4</small>
  </div>
  <div class="userbox">
    <label>Ja jako:
      <input id="volunteerName" type="text" placeholder="Twoje imię" />
    </label>
    <button id="saveUser" class="btn small">Zapisz</button>
  </div>
</header>

<nav id="tabsNav" class="tabs">
  <button class="tab tab-admin tab-active" data-tab="admin">Administracja</button>
  <button class="tab tab-instructor" data-tab="instructor">Instruktor</button>
  <button class="tab tab-volunteer" data-tab="volunteer">Wolontariusz</button>
  <button class="tab tab-reports" data-tab="reports">Raporty</button>
</nav>

<main class="wrap">
  <!-- === INSTRUCTOR TAB === -->
  <section id="tab-instructor" class="tabpane">
    <section class="statusbar">
      <div class="stat"><span class="label">Panel instruktora</span></div>
      <div class="statusbar__right">
        <button id="i-createDefaults" class="btn small">Dodaj zadania domyślne</button>
      </div>
    </section>

 <section class="controls compact">
      <div class="controls__row stack">
        <label>Rodzaj zadania
          <select id="i-taskType">
            <option value="prep">Przygotowanie do Jazdy</option>
            <option value="zabieg">Zabieg</option>
            <option value="wyprowadzenie">Wyprowadzenie Stada</option>
            <option value="sprowadzenie">Sprowadzenie Stada</option>
            <option value="rozsiodłanie">Rozsiodłanie</option>
            <option value="jazda_grupowa">Jazda Grupowa</option>
            <option value="jazda_indywidualna">Jazda Indywidualna</option>
          </select>
        </label>

        <div id="i-dynamicFields" class="grid2"></div>

        <div class="row-inline">
          <label>Punkty
            <input id="i-points" type="number" min="0" max="4" value="2" />
          </label>
          <label>Arena
            <input id="i-place" type="text" placeholder="np. hala / arena 1" />
          </label>
        </div>

        <label>Tytuł / opis (opcjonalnie)
          <input id="i-title" type="text" placeholder="np. Przygotowanie — koń Prada dla Oli" />
        </label>

        <button id="i-add" class="btn">Dodaj zadanie</button>
      </div>

      <div class="controls__row">
        <div class="viewtog">
          <button id="i-view-cards" class="viewbtn view-active" title="Kafelki">▦</button>
          <button id="i-view-list" class="viewbtn" title="Lista">≣</button>
        </div>
      </div>
    </section>

    <section id="i-list" class="grid"></section>
  </section>

  <!-- === VOLUNTEER TAB === -->
  <section id="tab-volunteer" class="tabpane hidden">
    <section class="statusbar">
      <div class="stat">
        <span class="label">Moje punkty:</span>
        <span id="myPoints" class="points">0</span>
        <span class="podkowy" id="myHorseshoes" aria-hidden="true"></span>
      </div>
      <div class="statusbar__right">
        <button id="pointsHistory" class="btn small ghost">Historia punktów</button>
        <label class="demo">
          <input id="demoAutoApprove" type="checkbox" />
          Tryb demo: auto-akceptacja
        </label>
      </div>
    </section>

    <section class="controls">
      <div class="chips">
        <button id="v-chipAll" class="chip chip-active">Wszystkie <span id="v-countAll" class="count">0</span></button>
        <button id="v-chipOpen" class="chip chip-open">Wolne <span id="v-countOpen" class="count">0</span></button>
        <button id="v-chipTaken" class="chip chip-taken">W trakcie <span id="v-countTaken" class="count">0</span></button>
        <button id="v-chipReview" class="chip chip-review">Do weryf. <span id="v-countReview" class="count">0</span></button>
        <button id="v-chipApproved" class="chip chip-approved">Zatwierdzone <span id="v-countApproved" class="count">0</span></button>
        <button id="v-chipMine" class="chip chip-mine">Moje zadania</button>
      </div>

      <div class="controls__row">
        <input id="v-search" type="search" placeholder="Szukaj (tytuł / koń / miejsce)" />
        <select id="v-type" title="Typ zadania">
          <option value="">Wszystkie typy</option>
          <option value="porządki">Prace porządkowe</option>
          <option value="siodłanie">Przygotowanie do Jazdy</option>
          <option value="wyprowadzenie">Wyprowadzenie Stada</option>
          <option value="sprowadzenie">Sprowadzenie Stada</option>
          <option value="rozsiodłanie">Rozsiodłanie</option>
          <option value="lonżowanie">Lonżowanie</option>
          <option value="klinika">Klinika</option>
          <option value="zabieg">Zabieg</option>
          <option value="dziennikarz">Dziennikarz / Kronikarz</option>
          <option value="luzak">Luzak</option>
        </select>
        <div class="viewtog">
          <button id="v-view-cards" class="viewbtn view-active" title="Kafelki">▦</button>
          <button id="v-view-list" class="viewbtn" title="Lista">≣</button>
        </div>
      </div>
    </section>

    <section id="v-list" class="grid"></section>

    <section class="actions">
      <button id="exportCsv" class="btn">Eksport CSV (moja aktywność)</button>
      <button id="resetData" class="btn ghost">Reset danych (demo)</button>
      <button id="hardReset" class="btn ghost">Twardy reset</button>
    </section>
  </section>

  <!-- === ADMIN TAB === -->
  <section id="tab-admin" class="tabpane hidden">
    <section class="statusbar">
      <div class="stat">
        <span id="adminTodayLabel" class="label">Planowanie — </span>
      </div>
      <div class="statusbar__right">
        <button id="a-print" class="btn small">Drukuj grafik</button>
        <button id="a-generate" class="btn small">Wygeneruj grafik dnia</button>
          <button id="a-refresh" class="btn small ghost">Odśwież</button>
      </div>
    </section>

 <section class="controls compact">
      <div class="controls__row stack">
        <h3>Dodaj jeźdźca</h3>
        <div class="grid2">
  <label>Imię <input id="a-first" type="text" /></label>
  <label>Nazwisko <input id="a-last" type="text" /></label>
  <label>Telefon <input id="a-phone" type="tel" /></label>
  <label>Email <input id="a-email" type="email" /></label>
  <label>Typ jazdy
    <select id="a-rideType">
      <option value="jazda_grupowa">Jazda Grupowa</option>
      <option value="jazda_indywidualna">Jazda Indywidualna</option>
    </select>
  </label>
  <label>Poziom
    <select id="a-level">
      <option value="kłus">kłus</option>
      <option value="kłus-galop">kłus-galop</option>
      <option value="obóz">obóz</option>
      <option value="teren">teren</option>
      <option value="lonża">lonża (indyw.)</option>
    </select>
  </label>
  <label>Koń
    <select id="a-horse"></select>
  </label>
  <label>Data <input id="a-date" type="date" /></label>
  <label>Godzina <input id="a-when" type="time" /></label>
  <label>Instruktor
    <select id="a-instructor"></select>
  </label>

  <!-- przycisk w tej samej linii -->
  <button id="a-addRider" class="btn small">Zapisz na jazdę</button>
</div>

      <button id="a-addRider" class="btn small">Zapisz na jazdę</button>

      <div class="controls__row">
        <label>Data grafiku <input id="a-day" type="date" /></label>
      </div>
    </section>

    <section id="a-cohorts" class="grid"></section>

    <section class="schedule card" id="scheduleCard">
      <div class="title">
        <h3 id="schedTitle">Grafik dnia</h3>
      </div>
      <div id="scheduleGrid" class="sched-grid"></div>
    </section>
  </section>

  <!-- === REPORTS TAB === -->
  <section id="tab-reports" class="tabpane hidden">
    <section class="statusbar">
      <div class="stat"><span class="label">Raporty — podsumowanie</span></div>
      <div class="statusbar__right">
        <button id="r-export" class="btn small">Eksport CSV</button>
      </div>
    </section>

    <section class="controls">
      <div class="controls__row">
        <label>Od <input id="r-from" type="date" /></label>
        <label>Do <input id="r-to" type="date" /></label>
        <select id="r-group">
          <option value="none">Bez grupowania</option>
          <option value="user">Po wolontariuszu</option>
          <option value="type">Po typie zadania</option>
          <option value="horse">Po koniu</option>
        </select>
        <select id="r-status">
          <option value="">Status: wszystkie</option>
          <option value="open">Wolne</option>
          <option value="taken">W trakcie</option>
          <option value="to_review">Do weryfikacji</option>
          <option value="approved">Zatwierdzone</option>
          <option value="rejected">Odrzucone</option>
        </select>
        <div class="viewtog">
          <button id="r-view-cards" class="viewbtn view-active" title="Kafelki">▦</button>
          <button id="r-view-list" class="viewbtn" title="Lista">≣</button>
        </div>
      </div>
    </section>

    <section id="r-list" class="grid"></section>
  </section>
</main>

<!-- MODAL — szczegóły -->
<div id="modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div class="modal__card">
    <div class="modal__head">
      <h2 id="modalTitle">Szczegóły</h2>
      <button id="closeModal" class="iconbtn" aria-label="Zamknij">×</button>
    </div>
    <div id="modalBody" class="modal__body"></div>
    <div class="modal__foot" id="modalFoot"></div>
  </div>
</div>

<!-- MODAL — POTWIERDZENIE (in-app) -->
<div id="confirm" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
  <div class="modal__card">
    <div class="modal__head">
      <h2 id="confirmTitle">Potwierdź</h2>
    </div>
    <div id="confirmBody" class="modal__body"></div>
    <div class="modal__foot">
      <button id="confirmCancel" class="btn ghost">Nie</button>
      <button id="confirmOk" class="btn">Tak</button>
    </div>
  </div>
</div>

<div id="toast" class="toast" role="status" aria-live="polite"></div>

<footer class="foot">
  <small>© EquiFlow MVP v1.5 • Instruktor / Wolontariusz / Administracja / Raporty</small>
</footer>

<script src="app.js?v=1.5" defer></script>
</body>
</html>
